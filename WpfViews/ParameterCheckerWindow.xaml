<Window x:Class="JaMoApp.ParameterCheckerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Parameter Checker"
        Height="800"
        Width="1000"
        Background="#2D2D2D"
        Foreground="#E0E0E0"
        ShowActivated="False">
  <Window.Resources>
    <!-- Dark TextBox Style -->
    <Style x:Key="DarkTextBox"
           TargetType="TextBox">
      <Setter Property="Background"
              Value="#333333" />
      <Setter Property="Foreground"
              Value="White" />
      <Setter Property="BorderBrush"
              Value="#555555" />
      <Setter Property="Padding"
              Value="5" />
    </Style>
    <!-- Dark Button Style -->
    <Style x:Key="DarkButton"
           TargetType="Button">
      <Setter Property="Background"
              Value="#444444" />
      <Setter Property="Foreground"
              Value="White" />
      <Setter Property="Padding"
              Value="10,5" />
      <Setter Property="BorderBrush"
              Value="#666666" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="3">
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Background"
                  Value="#555555" />
        </Trigger>
      </Style.Triggers>
    </Style>
    <!-- Generate Button Style -->
    <Style x:Key="GenerateButton"
           TargetType="Button"
           BasedOn="{StaticResource DarkButton}">
      <Setter Property="Background"
              Value="#007ACC" />
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Background"
                  Value="#3399FF" />
        </Trigger>
      </Style.Triggers>
    </Style>
    <!-- Dark DataGrid Style -->
    <Style x:Key="DarkDataGrid"
           TargetType="DataGrid">
      <Setter Property="Background"
              Value="#333333" />
      <Setter Property="Foreground"
              Value="White" />
      <Setter Property="HeadersVisibility"
              Value="Column" />
      <Setter Property="GridLinesVisibility"
              Value="None" />
      <Setter Property="RowBackground"
              Value="#444444" />
      <Setter Property="AlternatingRowBackground"
              Value="#3D3D3D" />
      <Setter Property="BorderBrush"
              Value="#555555" />
      <Setter Property="RowHeight"
              Value="25" />
      <Setter Property="ColumnHeaderStyle">
        <Setter.Value>
          <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background"
                    Value="#444444" />
            <Setter Property="Foreground"
                    Value="White" />
            <Setter Property="BorderBrush"
                    Value="#666666" />
            <Setter Property="Padding"
                    Value="5" />
          </Style>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!-- Top Controls -->
    <StackPanel Grid.Row="0"
                Orientation="Horizontal"
                Margin="0,0,0,10">
      <Button x:Name="btnBrowse"
              Content="Browse"
              Width="80"
              Margin="0,0,10,0"
              Style="{StaticResource DarkButton}" />
      <TextBlock x:Name="txtFilePath"
                 Text="No file selected"
                 VerticalAlignment="Center"
                 Margin="0,0,20,0" />
      <TextBox x:Name="txtFilter"
               Width="200"
               VerticalAlignment="Center"
               Style="{StaticResource DarkTextBox}" />
    </StackPanel>

    <!-- Main Content -->
    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="3*" />
        <ColumnDefinition Width="2*" />
      </Grid.ColumnDefinitions>

      <!-- Parameter Groups List -->
      <ListView x:Name="lstParameterGroups"
                Grid.Column="0"
                Margin="0,0,10,0">
        <ListView.View>
          <GridView>
            <GridViewColumn Width="40">
              <GridViewColumn.CellTemplate>
                <DataTemplate>
                  <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                </DataTemplate>
              </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Group Name"
                            Width="150"
                            DisplayMemberBinding="{Binding GroupName}" />
            <GridViewColumn Header="Parameters"
                            Width="300">
              <GridViewColumn.CellTemplate>
                <DataTemplate>
                  <ItemsControl ItemsSource="{Binding Parameters}">
                    <ItemsControl.ItemsPanel>
                      <ItemsPanelTemplate>
                        <WrapPanel />
                      </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                      <DataTemplate>
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,0,5,0">
                          <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                          <TextBlock Text="{Binding Name}"
                                     Margin="3,0,0,0" />
                        </StackPanel>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>
                </DataTemplate>
              </GridViewColumn.CellTemplate>
            </GridViewColumn>
          </GridView>
        </ListView.View>
      </ListView>

      <!-- Right Panel -->
      <Grid Grid.Column="1">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Color Legend -->
        <GroupBox Grid.Row="0"
                  Header="Color Legend"
                  Margin="0,0,0,10">
          <StackPanel>
            <StackPanel Orientation="Horizontal"
                        Margin="0,5">
              <Rectangle Width="20"
                         Height="20"
                         Fill="DarkRed"
                         Margin="0,0,10,0" />
              <TextBlock Text="0.00 - 0.24 (Very Incomplete)" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Margin="0,5">
              <Rectangle Width="20"
                         Height="20"
                         Fill="OrangeRed"
                         Margin="0,0,10,0" />
              <TextBlock Text="0.25 - 0.49 (Low Completion)" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Margin="0,5">
              <Rectangle Width="20"
                         Height="20"
                         Fill="Yellow"
                         Margin="0,0,10,0" />
              <TextBlock Text="0.50 - 0.74 (Moderate Completion)" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Margin="0,5">
              <Rectangle Width="20"
                         Height="20"
                         Fill="LightGreen"
                         Margin="0,0,10,0" />
              <TextBlock Text="0.75 - 0.99 (High Completion)" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Margin="0,5">
              <Rectangle Width="20"
                         Height="20"
                         Fill="Green"
                         Margin="0,0,10,0" />
              <TextBlock Text="1.00 (Fully Complete)" />
            </StackPanel>
          </StackPanel>
        </GroupBox>

        <!-- Results -->
        <GroupBox Grid.Row="1"
                  Header="Results">
          <DataGrid x:Name="dgResults"
                    AutoGenerateColumns="False"
                    Style="{StaticResource DarkDataGrid}">
            <DataGrid.Columns>
              <DataGridTextColumn Header="Element"
                                  Binding="{Binding ElementName}"
                                  Width="*" />
              <DataGridTextColumn Header="Filled / Total"
                                  Binding="{Binding CountDisplay}"
                                  Width="*" />
            </DataGrid.Columns>
          </DataGrid>
        </GroupBox>

        <!-- Missing Parameters -->
        <GroupBox Grid.Row="2"
                  Header="Missing Parameters">
          <DataGrid x:Name="dgMissingParams"
                    AutoGenerateColumns="False"
                    Style="{StaticResource DarkDataGrid}"
                    Visibility="Collapsed">
            <DataGrid.Columns>
              <DataGridTextColumn Header="Group"
                                  Binding="{Binding GroupName}"
                                  Width="*" />
              <DataGridTextColumn Header="Parameter"
                                  Binding="{Binding ParameterName}"
                                  Width="*" />
            </DataGrid.Columns>
          </DataGrid>
        </GroupBox>
      </Grid>
    </Grid>

    <!-- Bottom Buttons -->
    <StackPanel Grid.Row="2"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Margin="0,10,0,0">
      <Button x:Name="btnRun"
              Content="Run"
              Width="100"
              Height="30"
              Margin="0,0,10,0"
              Style="{StaticResource GenerateButton}" />
      <Button x:Name="btnCancel"
              Content="Close"
              Width="80"
              Height="30"
              Style="{StaticResource DarkButton}" />
    </StackPanel>
  </Grid>
</Window>
